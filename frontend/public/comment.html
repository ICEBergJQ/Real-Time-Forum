<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Comments for Post</title>
        <link rel="stylesheet" href="styles.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>
    <body>
        <!-- <section class="comments">
            <h2>Comments</h2>
            <div>
                <div class="comment">
                    <p><strong>John Doe</strong> | Posted on: 2024-12-01</p>
                    <p>This is a comment!</p>
                    <div class="comment-actions">
                        <button class="btn like-btn">ğŸ‘ Like (10)</button>
                        <button class="btn dislike-btn">ğŸ‘ Dislike (2)</button>
                    </div>
                </div>
                Reply Section
          <div class="reply-section">
            <h3>Reply</h3>
            <div class="editor">
              <textarea class="reply-input" placeholder="Add as many details as possible..."></textarea>
            </div>
            <button class="btn send-btn">Send</button>
          </div>
            </div>
        </section> -->
        <div class="container-comment hidden">
            <section class="comments">
              <h2>Comments</h2>
              <div class="comment">
                <div class="comment-header">
                  <img src="user-avatar.jpg" alt="User Avatar" class="user-avatar">
                  <div class="comment-details">
                    <p><strong>F-Martins</strong> <span class="user-role">New Member</span> â€¢ 4 replies</p>
                    <p class="comment-time">2 days ago</p>
                  </div>
                </div>
                <div class="comment-body">
                  <p>
                    Estamos enfrentando este problema e estÃ¡ impactando muito na
                    usabilidade do sistema. Muitas pessoas reclamando do sistema.
                  </p>
                </div>
                <div class="comment-footer">
                  <p>1 person likes this</p>
                  <button class="btn">ğŸ‘ Like</button>
                  <button class="btn">ğŸ‘ Dislike (2)</button>
                </div>
              </div>
          
              <!-- Reply Section -->
              <div class="reply-section">
                <h3>Reply</h3>
                <div class="editor">
                  <textarea class="reply-input" placeholder="Add as many details as possible..."></textarea>
                </div>
                <button class="btn send-btn">Send</button>
              </div>
            </section>
          </div>
    
            <script>
                document.addEventListener("DOMContentLoaded", () => {
                    const sendBtn = document.querySelector(".send-btn");
                    const replyInput = document.querySelector(".reply-input");
    
                    sendBtn.addEventListener("click", () => {
                        const replyText = replyInput.value;
                        if (replyText.trim() !== "") {
                            alert("Reply submitted: " + replyText);
                            replyInput.value = ""; // Clear the input after submission
                        } else {
                            alert("Reply cannot be empty!");
                        }
                    });
                });
            </script>
<!-- //             document.addEventListener("DOMContentLoaded", () => {
//     const commentButtons = document.querySelectorAll(".comment-btn");

//     commentButtons.forEach(button => {
//         button.addEventListener("click", () => {
//             const route = button.getAttribute("data-route");

//             // Update the browser history
//             window.history.pushState({}, "", route);

//             // Fetch and inject the content
//             fetch(route)
//                 .then(response => response.text())
//                 .then(html => {
//                     document.getElementById("dynamic-content").innerHTML = html;
//                     document.querySelector("main").style.display = "none";
//                 })
//                 .catch(error => console.error("Error loading page:", error));
//         });
//     });

//     // Handle browser back/forward navigation
//     window.addEventListener("popstate", () => {
//         const currentRoute = window.location.pathname;

//         // Re-fetch and load the content for the current route
//         fetch(currentRoute)
//             .then(response => response.text())
//             .then(html => {
//                 document.getElementById("dynamic-content").innerHTML = html;
//                 document.querySelector("main").style.display = currentRoute === "/" ? "block" : "none";
//             })
//             .catch(error => console.error("Error loading page:", error));
//     });
// }); -->
        <!-- <header>
            <h1>{{ post.title }}</h1>
            <p>By <strong>{{ post.author }}</strong> | Posted on: {{ post.date }}</p>
        </header>
        <section class="comments">
            <h2>Comments</h2>
            <div>
                {{#each comments}}
                <div class="comment">
                    <p><strong>{{ this.username }}</strong> | Posted on: {{ this.date }}</p>
                    <p>{{ this.content }}</p>
                    <div class="comment-actions">
                        <button class="btn like-btn" data-comment-id="{{ this.id }}">ğŸ‘ Like ({{ this.likes }})</button>
                        <button class="btn dislike-btn" data-comment-id="{{ this.id }}">ğŸ‘ Dislike ({{ this.dislikes }})</button>
                    </div>
                </div>
                {{/each}}
            </div>
        </section>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const likeButtons = document.querySelectorAll(".like-btn");
                const dislikeButtons = document.querySelectorAll(".dislike-btn");

                likeButtons.forEach(button => {
                    button.addEventListener("click", () => {
                        const commentId = button.getAttribute("data-comment-id");
                        // Increment likes via backend API
                        fetch(`/comment/${commentId}/like`, { method: 'POST' })
                            .then(response => response.json())
                            .then(data => {
                                button.innerText = `ğŸ‘ Like (${data.likes})`;
                            });
                    });
                });

                dislikeButtons.forEach(button => {
                    button.addEventListener("click", () => {
                        const commentId = button.getAttribute("data-comment-id");
                        // Increment dislikes via backend API
                        fetch(`/comment/${commentId}/dislike`, { method: 'POST' })
                            .then(response => response.json())
                            .then(data => {
                                button.innerText = `ğŸ‘ Dislike (${data.dislikes})`;
                            });
                    });
                });
            });
        </script> -->
    </body>
</html>
